# JavaScript编码规范

### 目录
1. JavaScript文件
2. 排版规则
3. 命名规范
4. 编码规范
5. 注释规则
6. 浏览器兼容问题

### 进行编码规范的目的
1. 统一编码风格
2. 提高代码的可阅读性
3. 减少错误代码
4. 减少性能漏洞
5. 提高代码可读性
6. 减少错误的编码设计
7. 作为代码检查的依据
8. 建立可维护的JavaScript语言编码规范


### JavaScript文件
1. 	文件引用
	```
	js文件不应该被包含在html文件中(html中的js代码不能被缓存和压缩)，将增加文件大小
	filename.js应尽量放到body后面,减少载入脚本而造成页面内容被延迟加载的问题
	禁止使用language属性,必须使用type属性
	<script type="text/javascript" src="filename.js"></script>
	```
2. 	编码格式
	```
	js文件必须采用UTF-8无BOM格式编码,避免出现乱码问题。
	维护已存在的js脚本文件必须把编码格式转换成规范要求的UTF-8无BOM格式
	```

### 排版规则
1. 	缩进
	```
	每一级缩进4个空白符,不要使用Tab作为缩进(不同编辑器的Tab缩进长度不一致)
	```
2.  空白
	* 空行
	* 空格
3.  换行:
	* 每行一个语句
	* 较长的语句(>80字符),必须多行书写
	* 行结束，必须使用;表示结束

### 命名规范
* 	约定"类名"使用Pascal命名法,即用英文的大小写来分割单词,所有单词的首字母大写
*   约定"变量"和"方法"使用Camel命名法,即第一个英文首字母小写,其余单词首字母大写
1.  变量命名
	```
	采用Camel命名法(全局变量除外)
	1) 全局变量使用全大写字母,单词间下划线间隔 var MAX_COUNT=10
	2) 不要将在循环中频繁使用的临时变量如i,j等用于其他用途
	3) UI(用户界面)控制变量应在名称后面加控制类型,例如：leftComboBox,TopScrollPane
	4) 带有"num"或者"count"开头的变量名约定为数字
	5) 能缩写的名称尽量使用缩写
	6) 缩写词不要全部使用大写字母
	7) 前面加"is"的变量名,应该为布尔值,同理可以为"has","can"或者"should"
	8) 含有集合意义的属性命名,尽量包含其复数的意义,例如products
	```
2.  类命名
	```
	用Pascal命名规则,尽量谨慎的使用缩写,不要用下划线作类名单词连接符。类使用英文的大小写来分割单词,所有单词的首字母大写
	例如:MouseEventHandler
		 EventHandler
		 UIEventHandler
	```
	* 类方法命名
		```
		普通方法使用意义完整的英文描述命名,采用Camel命名法。每个方法执行一个动作，尽量采用动词和动宾结构
		例如：obj.getProductName()
		```
	* 类属性命名
		```
		类的属性采用camel命名规则
		如果类的属性设置为私有,则前面必须添加下划线
		例如:obj._somePrivateVariable
		```
3.  函数命名
	```
	函数名使用意义完整的英文描述,采用Camel命名,采用第一个单词的字母小写,剩余单词首字母的大写其余字母小写的大小写混合法
	例如：function productClick(index,productName){}
	```

### 编码规范
	变量是程序的基础,规范的变量编码不仅能降低程序的出错率,更能增加代码的可读性,方便维护和扩展。

#### 变量
1.	声明
	```
    所有的变量必须在使用前先声明,虽然JavaScript并不强制必须这么做,但可以让程序易于阅读，且也容易发现那些没有声明的变量(未声明的变量会被程序默认编译成全局变量)
 	每个变量的声明语句单独放到一行，并加上注释说明,声明变量必须加上var关键字
   	例如：var currentActivedVersionIndex;  //当前激活的版本号
   	```
2.  变量初始化
	```
	变量必须在声明初始化以后才能使用,即便是NULL类型
	```
3. 	生命周期
	```
	变量应该尽量保持最小的生命周期(作用域范围)
	在函数的首部定义所有的变量
	尽量减少全局变量的使用,不要让局部变量覆盖全局变量
	```
4.  浮点数
	```
	浮点数必须指明小数点后一位(即使是0)
	浮点数必须指明实部,即使它们为零(使用 0. 开头,禁止写成 .5)
	例如：var floatNum=0.0
	```
5.  json对象
	```
	json对象定义,应该补全双引号
	例如:{name:"Tom"}
		 {'name':"Tom"}	
		应该写成:
		{"name":"Tom"}
	```

#### 操作符
1.  {}和[]
	```
	使用字面量方式创建空对象和空数组,代码看起来简单易懂。避免new Object()和new Array()的方法
	例如:var productArr=[];
		 var studentObj={};
	```
2.  =,==和===
	```
	=是赋值操作符
	==做逻辑等判断时,会先进行类型转换后在进行比较,但"==="则不会(数据类型必须也相同)
	```
3.  ?:
	```
	三元表达式
	(condition)?func1():func2();
	如果方法比较长,可以放在不同的行
	(condition)
	?long statement
	:another long statement
	```
4.  巧用"+"
	```
	作用1:数字值相加
	作用2:字符串连接
	作用3:一元运算符,把字符串转换为数字(数据类型转换)
	例如：	var valueA=20;
			var valueB="10";
			alert(valueA + valueB);		//输出:2010
			alert(valueA + (+valueB));	//输出:30
			alert(valueA ++valueB);		//Compile error
	```

#### 语句
1.  简单语句
	```
	使用分号表示语句结束;如果一个赋值语句使用函数或对象来赋值,可能会跨多行,需要在赋值语句末加上分号。
	```
2.  复杂语句
	```
	复合语句if,for,while,do,switch,try...catch...等代码体,需要放在'{}'里面
	'{'统一另起一行,放在行首,标识代码块的开始
	'}'应在一行开头,标志代码块结束,同时需要和'{'所在行的开始对齐。
	```
3.  return语句
	```
	如果返回表达式,则表达式必须与return关键字在同一行,不能另起一行。
	若没有返回表达式,则返回undefined。
	```
4.  for/for-in循环
	```
	for-in循环只用于object/map/hash的遍历,遍历数组通常用最普通的for循环。避免在for循环中使用关键字continue
	```
5.  with语句(扩展作用域链)
	```
	不要使用with语句,这将使得你的代码在语义上变得不清晰,且JavaScript编译器难以在作用域链上查找某个变量,难以决定应该在哪个对象上来取值
	with (Math) {
	  a = PI * r * r;
	  x = r * cos(PI);
	  y = r * sin(PI / 2);
	}
	```
6.  不要使用生偏语法,不违反代码易读性原则

#### 函数
1.  函数声明
	```
	函数在调用前应先进行函数声明
	```
2.  函数参数
	```
	明确定义函数固定数量的参数和参数名称
	禁止在函数内部使用arguments去获取某个函数参数,而应直接使用参数名称
	```
3.  函数返回值
	```
	一个函数尽量返回统一的数据类型
	在根据条件(if...else...)返回不同的值时,尽量保证不同条件下返回的值数据类型一致
	```
4.  eval是恶魔
	```
	eval(string)
	eval会先计算并执行()内的JavaScript代码语句
	在把变量json化时,需要先把JSON字符串用'()'括号先括起来
	var jsonStr='{"name":"Tom","sex":"male"}';
	var jsonObj=eval( '(' + jsonStr + ')' );	//先进行字符串拼接,在eval()
	console.log(jsonObj.name);					//Tom
	```
5.  闭包
	```
	闭包中局部变量是传引用,不是传值
	函数对象,活动对象,作用域链,执行上下文对象(执行环境),垃圾回收机制(GC)
	```

### 注释规则


### 浏览器兼容问题

